(this["webpackJsonpclassio-react"]=this["webpackJsonpclassio-react"]||[]).push([[0],{138:function(e,t,n){},139:function(e,t,n){},171:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(23),s=n.n(r),i=(n(138),n(66)),l=n.n(i),o=n(80),u=n(56),d=n(33),j=(n(139),n(140),n(181)),h=n(179),b=n(42),f=n(131),m=n(176),O=n(182),p=n(132),x=n(177),g=n(180),v=n(53),y=n(81),_=n.n(y),T=n(40),S=n.n(T),M=n(178),k=n(184),w=n(6),C=M.a.Meta,F=j.a.Text;j.a.Paragraph;function A(e){var t=Object(a.useState)(!0),n=Object(d.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),i=Object(d.a)(s,2),u=i[0],j=i[1],h=Object(a.useState)(0),b=Object(d.a)(h,2),f=b[0],m=b[1],O=Object(w.jsx)("div",{style:{maxWidth:200},children:Object(w.jsx)(F,{children:"Some classes are async, and might not have set timeslots."})}),p=e.code,x=e.onDelete,g=e.onAdd,v=e.semester;return Object(a.useEffect)((function(){var e=function(){var e=Object(o.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("https://classio-api.herokuapp.com/course/".concat(p),{params:{semester:v}});case 2:t=e.sent,j(t.data.course_info.name),n=S.a.flatMap(t.data.course_info.sections,"timeslots"),m(n.length),g(t.data.course_info),r(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r(!0),e()}),[p,v]),Object(w.jsx)(M.a,{size:"small",bordered:!1,title:p,loading:c,className:"App-class-card",style:{marginRight:10,height:120},extra:Object(w.jsx)("a",{onClick:function(){return x(e.code)},children:"X"}),children:Object(w.jsx)(C,{title:u,description:Object(w.jsxs)("div",{children:[Object(w.jsx)(F,{children:"Found ".concat(f," timeslot(s)")}),0===f&&Object(w.jsx)(k.a,{content:O,title:"Why are there no timeslots?",children:Object(w.jsx)("a",{children:" ? "})})]})})})}var N=n(183),E=n(185),L=n(70),z=n(38),D=j.a.Title;function I(e){var t=e.timeslots;return Object(w.jsx)(M.a,{style:{width:"100%"},bodyStyle:{padding:0},size:"small",children:Object(w.jsxs)(L.a,{justify:"center",style:{margin:0,paddingTop:10,justifyContent:"center"},children:[Object(w.jsxs)(z.a,{flex:1,className:"Timetable-column",children:[Object(w.jsx)(D,{level:5,children:"Monday"}),t.Mo.map((function(e){return Object(w.jsx)("p",{children:"".concat(e.start_time," - ").concat(e.end_time)})}))]}),Object(w.jsxs)(z.a,{flex:1,className:"Timetable-column",children:[Object(w.jsx)(D,{level:5,children:"Tuesday"}),t.Tu.map((function(e){return Object(w.jsx)("p",{children:"".concat(e.start_time," - ").concat(e.end_time)})}))]}),Object(w.jsxs)(z.a,{flex:1,className:"Timetable-column",children:[Object(w.jsx)(D,{level:5,children:"Wednesday"}),t.We.map((function(e){return Object(w.jsx)("p",{children:"".concat(e.start_time," - ").concat(e.end_time)})}))]}),Object(w.jsxs)(z.a,{flex:1,className:"Timetable-column",children:[Object(w.jsx)(D,{level:5,children:"Thursday"}),t.Th.map((function(e){return Object(w.jsx)("p",{children:"".concat(e.start_time," - ").concat(e.end_time)})}))]}),Object(w.jsxs)(z.a,{flex:1,className:"Timetable-column",children:[Object(w.jsx)(D,{level:5,children:"Friday"}),t.Fr.map((function(e){return Object(w.jsx)("p",{children:"".concat(e.start_time," - ").concat(e.end_time)})}))]})]})})}var W=N.a.Panel;function B(e){var t=e.timetable,n=t.timetable,a=t.scores;return Object(w.jsx)(N.a,{children:Object(w.jsx)(W,{header:Object(w.jsxs)("div",{children:[Object(w.jsx)(E.a,{color:{Early:"gold","Mid-Day":"green",Late:"geekblue"}[a.type],style:{margin:5},children:a.type}),Object(w.jsxs)(E.a,{color:"blue",style:{margin:5},children:["Score: ",a.total,"/10"]}),Object(w.jsxs)(E.a,{color:"blue",style:{margin:5},children:["Time wasted: ",a.offTime,"h"]}),Object(w.jsxs)(E.a,{color:"blue",style:{margin:5},children:["Lunches: ",a.lunch,"/5"]}),Object(w.jsxs)(E.a,{color:"blue",style:{margin:5},children:["Dinners: ",a.dinner,"/5"]})]}),style:{padding:0,margin:0,justifyContent:"flex-start",alignItems:"flex-start",backgroundColor:"#ffffff"},showArrow:!1,children:Object(w.jsx)(I,{timeslots:n})},"1")})}var P=n(78),H=n(71),R=n.n(H),G=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return n===t.length?a.push(c):t[n].forEach((function(r){return e(t,n+1,a,[].concat(Object(u.a)(c),[r]))})),a},J=["Mo","Tu","We","Th","Fr"],U={start_time:"11:30",end_time:"12:30"},V={start_time:"18:30",end_time:"19:30"},X=function(e){if(0===e.length||1===e.length)return!0;for(var t=1;t<e.length;t++){var n=e[t-1];if(e[t].start_time<n.end_time)return!1}return!0},Y=function(e){for(var t={Early:0,"Mid-Day":0,Late:0},n=0,a=Object.values(e);n<a.length;n++){var c,r=a[n],s=Object(P.a)(r);try{for(s.s();!(c=s.n()).done;){var i=c.value;i.start_time<"10:30"?t.Early++:i.start_time<"3:30"?t["Mid-Day"]++:t.Late++}}catch(l){s.e(l)}finally{s.f()}}return Object.entries(t).reduce((function(e,t){return e[1]>t[1]?e:t}))[0]},q=function(e){if(0===e.length||1===e.length)return 0;for(var t=0,n=1;n<e.length;n++){var a=e[n-1],c=e[n],r=R()(a.end_time,R.a.HTML5_FMT.TIME),s=R()(c.start_time,R.a.HTML5_FMT.TIME);t+=R.a.duration(s.diff(r)).asHours()}return t},K=function(e,t){if(0===e.length)return!0;if(1===e.length)return!(t.end_time>e[0].start_time&&e[0].end_time>t.start_time);for(var n,a=0,c=e.length-1;;){if(e[n=Math.floor((c+a)/2)].end_time===t.start_time){n++;break}if(e[n].end_time>t.start_time){if(a>(c=n-1))break}else if((a=n+1)>c){n++;break}}return n===e.length||t.end_time<=e[n].start_time},Q=j.a.Paragraph,Z=j.a.Text,$=j.a.Title,ee=h.a.Step,te=b.a.Option;var ne=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(d.a)(r,2),i=s[0],j=s[1],y=Object(a.useState)("2021 Fall"),T=Object(d.a)(y,2),M=T[0],k=T[1],C=Object(a.useState)([]),F=Object(d.a)(C,2),N=F[0],E=F[1],L=Object(a.useState)([]),z=Object(d.a)(L,2),D=z[0],I=z[1],W=Object(a.useState)(!1),H=Object(d.a)(W,2),R=H[0],ne=H[1],ae=Object(a.useState)(-1),ce=Object(d.a)(ae,2),re=ce[0],se=ce[1],ie=Object(a.useState)([]),le=Object(d.a)(ie,2),oe=le[0],ue=le[1],de=function(e){var t=Object(u.a)(D);t.unshift(e),I(t)};Object(a.useEffect)((function(){var e=function(){var e=Object(o.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("https://classio-api.herokuapp.com/course",{params:{semester:M}});case 2:t=e.sent,n=t.data.course_codes,a=[],n.forEach((function(e){a.push({value:e})})),c(a),ne(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();ne(!0),e()}),[M]);var je=function(e){var t=Object(u.a)(N),n=Object(u.a)(D),a=t.indexOf(e);t.splice(a,1),n.splice(a,1),E(t),I(n)};return Object(w.jsx)("div",{className:"App",children:Object(w.jsx)("header",{className:"App-header",children:Object(w.jsxs)("div",{style:{maxWidth:"100%",width:800,padding:10},children:[Object(w.jsxs)("div",{className:"App-section",style:{textAlign:"center"},children:[Object(w.jsx)($,{children:"classio"}),Object(w.jsx)(Z,{children:"A better take on class selection. Put some content here ashasdhalsdha"})]}),Object(w.jsxs)("div",{className:"App-section",children:[Object(w.jsxs)("div",{style:{flex:1,flexDirection:"row",justifyContent:"space-around",alignItems:"center",marginBottom:20,display:"flex"},children:[Object(w.jsxs)(b.a,{defaultValue:"2021 Fall",size:"large",style:{flex:.3,marginRight:10},onChange:function(e){return function(e){se(-1),k(e),j(""),E([]),I([]),ue([])}(e)},children:[Object(w.jsx)(te,{value:"2021 Fall",children:"Fall 2021"}),Object(w.jsx)(te,{value:"2021 Winter",children:"Winter 2021"})]}),Object(w.jsx)(m.a,{allowClear:!0,disabled:R,value:i,options:n,loading:R,style:{flex:1},onSelect:function(e){!function(e){if(N.includes(e))f.b.error("You can't select the same class twice!");else{var t=Object(u.a)(N);t.unshift(e),E(t),j("")}}(e)},onSearch:function(){},onChange:j,filterOption:function(e,t){return-1!==t.value.toUpperCase().indexOf(e.toUpperCase())},children:Object(w.jsx)(O.a,{size:"large",placeholder:R?"Loading courses...":"Enter course code",disabled:R})})]}),Object(w.jsxs)(Q,{children:["Selected ",Object(w.jsx)("b",{children:D.length})," course(s)"]}),Object(w.jsx)("div",{className:"App-horizontal-scroll",children:N.map((function(e){return Object(w.jsx)(A,{onDelete:je,code:e,onAdd:de,semester:M},e)}))}),Object(w.jsx)(p.a,{style:{marginTop:10},type:"primary",block:!0,size:"large",disabled:0===D.length,onClick:function(){ue([]),se(0);var e=function(e){var t,n=[],a=Object(P.a)(e);try{for(a.s();!(t=a.n()).done;){var c=t.value,r=S.a.filter(c.sections,(function(e){return e.timeslots.length>0})),s=S.a.groupBy(r,(function(e){return e.kind})),i=Object.values(s);n=n.concat(i)}}catch(l){a.e(l)}finally{a.f()}return n}(D);se(1);var t=function(e){var t,n=[],a=Object(P.a)(e);try{for(a.s();!(t=a.n()).done;){var c,r=t.value,s=S.a.flatMap(r,(function(e){return e.timeslots})),i=S.a.groupBy(s,(function(e){return e.day})),l=!0,o=Object(P.a)(J);try{for(o.s();!(c=o.n()).done;){var u=c.value;if(i[u]=S.a.sortBy(i[u],"start_time"),!(l=l&&X(i[u])))break}}catch(d){o.e(d)}finally{o.f()}l&&n.push(i)}}catch(d){a.e(d)}finally{a.f()}return n}(G(e));se(2);var n=function(e){return e.map((function(e){for(var t={total:0,lunch:0,dinner:0,offTime:0,type:"late"},n=0,a=Object.values(e);n<a.length;n++){var c=a[n];t.offTime+=q(c),t.lunch+=K(c,U)?1:0,t.dinner+=K(c,V)?1:0}return t.type=Y(e),t.total=10-(5-t.lunch)-(5-t.dinner)-Math.round(t.offTime),{scores:t,timetable:e}}))}(t),a=S.a.sortBy(n,(function(e){return e.scores.total})).reverse();ue(a),se(3)},children:"Generate Timetables"})]}),Object(w.jsxs)("div",{className:"App-section",style:{textAlign:"center"},children:[Object(w.jsxs)(h.a,{size:"small",current:re,children:[Object(w.jsx)(ee,{title:"Parsing",icon:0===re&&Object(w.jsx)(v.a,{})}),Object(w.jsx)(ee,{title:"Generating",icon:1===re&&Object(w.jsx)(v.a,{})}),Object(w.jsx)(ee,{title:"Scoring",icon:2===re&&Object(w.jsx)(v.a,{})})]}),Object(w.jsxs)(x.a,{plain:!0,children:["Showing ",oe.length," option(s)"]}),Object(w.jsx)(g.b,{itemLayout:"vertical",size:"large",pagination:{onChange:function(e){console.log(e)},pageSize:10},style:{padding:0},dataSource:oe,renderItem:function(e){return Object(w.jsx)(g.b.Item,{style:{paddingLeft:0,paddingRight:0},children:Object(w.jsx)(B,{timetable:e})},Math.floor(1e4*Math.random()))}}),","]})]})})})},ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,186)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(ne,{})}),document.getElementById("root")),ae()}},[[171,1,2]]]);
//# sourceMappingURL=main.19321e9c.chunk.js.map